---
import Layout from "../../layouts/Layout.astro";
import { movies } from "../../../movies.json";
import Svg from "../../components/Svg.astro";

const { idMovie } = Astro.params;

const movieFound = movies.find((movie) => movie.title === idMovie);
if (!movieFound) return Astro.redirect("/404");  

const { title, image, genre, director, actors, synopsis, rating, id } = movieFound;

---

<Layout title="MisPeliculas | Proyecto">
    <section class="flex flex-col gap-5 md:flex-row overflow-y-auto ver pb-10 h-full w-full items-center md:items-start">
        <article
            class="flex flex-col items-center rounded-lg bg-bgs p-4 max-w-[300px] "
            transition:name=`movie ${idMovie} link`
        >
            <picture class="overflow-hiddn rounded-lg">
                <img
                    class="w-full max-w-[200px] [aspect-ratio:1/1.4] transition-all duration-300 object-cover rounded-sm"
                    src={image}
                    alt={title}
                    transition:name=`movie ${idMovie} image`
                />
            </picture>
            <div class="flex flex-col gap-2 items-center">
                <p class="text-xs text-sky-400">{genre}</p>
                <h1 class="text-2xl font-bold">{title}</h1>
                <span class="text-xs text-sky-50/40 text-center">{director}</span>
                <span class="text-xs text-sky-50/40 text-center">{actors.join(", ")}</span>
                <p class="text-sm text-pretty text-sky-50/80">{synopsis}</p>
            </div>
        </article>

        <div
            class="max-w-[1080px] max-h-[720px] bg-gray-600 rounded-xl shadow-xl grid place-content-center w-full [aspect-ratio:16/9]"
        >
            <Svg class="fill-black w-full max-w-[100px]">
                <path
                    d="M342.624 454.333H149.333C98.8016 454.333 57.6666 413.198 57.6666 362.667V169.376L70.3333 182.043V234.667V249.667H85.3333H128H137.957L342.624 454.333ZM122.962 436.849L143 443.994V422.72V362.645V347.645H128H85.3333H70.3333V362.645C70.3333 397.082 92.5265 425.996 122.962 436.849ZM128 334.979H143V319.979V277.312V262.312H128H85.3333H70.3333V277.312V319.979V334.979H85.3333H128ZM438.918 412.981L432.171 423.197L440.828 431.855L495.143 486.169C497.626 488.653 497.626 492.659 495.143 495.143C493.902 496.383 492.303 497 490.667 497C489.03 497 487.431 496.383 486.191 495.143L16.8572 25.8094C14.3738 23.3259 14.3738 19.3407 16.8572 16.8573C19.3407 14.3738 23.3259 14.3738 25.8094 16.8573L80.124 71.1719L88.7816 79.8295L98.9978 73.0815C114.024 63.1566 131.396 57.6667 149.333 57.6667H362.667C413.198 57.6667 454.333 98.8016 454.333 149.333V362.645C454.333 380.583 448.843 397.955 438.918 412.981ZM341.333 292.312H356.333V277.312V234.645V219.645H341.333H264.832H228.619L254.225 245.252L296.892 287.919L301.285 292.312H307.499H341.333ZM409.639 400.644L414.032 405.037H420.245H420.267H429.759L433.823 396.459C438.673 386.219 441.688 374.756 441.688 362.645V347.645H426.688H392.853H356.64L382.247 373.252L409.639 400.644ZM426.667 334.979H441.667V319.979V277.312V262.312H426.667H384H369V277.312V319.979V334.979H384H426.667ZM426.667 249.645H441.667V234.645V191.979V176.979H426.667H384H369V191.979V234.645V249.645H384H426.667ZM369 149.312V164.312H384H426.667H441.667V149.312C441.667 114.875 419.473 85.9616 389.038 75.1087L369 67.9634V89.2373V149.312Z"
                ></path>
            </Svg>
        </div>
    </section>
</Layout>

<style>
    .ver{
        scrollbar-width: thin;
        scrollbar-color: #38bdf880 #00000000;
        scroll-behavior: smooth;
        transition: left 500ms cubic-bezier(0, 0.11, 0.35, 2);
    }
</style>
